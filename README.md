<p align="center">
  <img src="img/antigravity_logo.jpg" alt="Antigravity Logo" width="120"/>
</p>

<h1 align="center">Antigravity-Proxy</h1>

<p align="center">
  <b>ğŸš€ ä¸“ä¸º Antigravity ç¼–è¾‘å™¨æ‰“é€ ï¼šåœ¨ä¸­å›½ä¹Ÿèƒ½æ— éœ€ TUN æ¨¡å¼ç¨³å®šèµ°ä»£ç†</b>
</p>

<p align="center">
  <a href="https://github.com/yuaotian/antigravity-proxy/actions"><img src="https://github.com/yuaotian/antigravity-proxy/actions/workflows/build.yml/badge.svg" alt="Build Status"/></a>
  <a href="LICENSE.txt"><img src="https://img.shields.io/badge/license-BSD--2--Clause-blue.svg" alt="License"/></a>
  <img src="https://img.shields.io/badge/platform-Windows%20x86%20%7C%20x64-lightgrey.svg" alt="Platform"/>
  <img src="https://img.shields.io/badge/C%2B%2B-17-00599C.svg" alt="C++17"/>
  <img src="https://img.shields.io/badge/hook-MinHook-orange.svg" alt="MinHook"/>
</p>

<p align="center">
  <a href="README_EN.md">ğŸ‡¬ğŸ‡§ English Version</a>
</p>

---

## ğŸ“– ç›®å½• / Table of Contents

- [ğŸ“– é¡¹ç›®ä»‹ç» / Introduction](#-é¡¹ç›®ä»‹ç»--introduction)
- [âš¡ Antigravity å¿«é€Ÿå¼€å§‹ / Quick Start](#-antigravity-å¿«é€Ÿå¼€å§‹--quick-start)
- [âœ¨ åŠŸèƒ½ç‰¹æ€§ / Features](#-åŠŸèƒ½ç‰¹æ€§--features)
- [ğŸ”§ å·¥ä½œåŸç† / How It Works](#-å·¥ä½œåŸç†--how-it-works)
- [ğŸ› ï¸ ç¼–è¯‘æ„å»º / Build](#ï¸-ç¼–è¯‘æ„å»º--build)
- [ğŸ“ ä½¿ç”¨æ–¹æ³• / Usage](#-ä½¿ç”¨æ–¹æ³•--usage)
- [ğŸš€ è¿›é˜¶ç©æ³• / Advanced Usage](#-è¿›é˜¶ç©æ³•--advanced-usage)
- [ğŸ“„ è®¸å¯è¯ / License](#-è®¸å¯è¯--license)
- [ğŸ‘¤ å…³äºä½œè€… / Author](#-å…³äºä½œè€…--author)

---

## ğŸ“– é¡¹ç›®ä»‹ç» / Introduction

**Antigravity-Proxy** æ˜¯ä¸“é—¨ä¸º **Antigravity ç¼–è¾‘å™¨**é‡èº«å®šåˆ¶çš„ Windows ä»£ç†æ³¨å…¥ç»„ä»¶ï¼ˆDLLï¼‰ã€‚

å®ƒçš„ç›®æ ‡å¾ˆç®€å•ï¼šè®©ä¸­å›½ç”¨æˆ·ä½¿ç”¨ Antigravity æ—¶ï¼Œ**ä¸ç”¨å¼€ Clash TUN æ¨¡å¼**ï¼Œä¹Ÿèƒ½æŠŠç½‘ç»œæµé‡ç¨³å®šäº¤ç»™ä½ çš„ SOCKS5/HTTP ä»£ç†ã€‚

> é¡¹ç›®å **Antigravity-Proxy** = Antigravity + Proxyï¼šåªæŠŠ Antigravity ç›¸å…³è¿›ç¨‹çš„æµé‡â€œæ‹½â€è¿›ä»£ç†é‡Œï¼ˆåˆ«æ‹…å¿ƒï¼Œä¸ä¼šå…¨å±€æ¥ç®¡ï¼‰ã€‚

### ğŸ¯ è§£å†³çš„ç—›ç‚¹ / Problem Solved

ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™äº›æƒ…å†µï¼Ÿ

- ğŸ”´ ä½¿ç”¨ Antigravity æ—¶**ä¸èµ°ç³»ç»Ÿä»£ç†**ï¼Œåªèƒ½è¢«è¿«å¼€å¯ Clash TUN æ¨¡å¼
- ğŸ”´ å¼€å¯ TUN æ¨¡å¼å**å…¨å±€æµé‡éƒ½è¢«ä»£ç†**ï¼Œå½±å“æœ¬åœ°å¼€å‘
- ğŸ”´ TUN æ¨¡å¼éœ€è¦**ç®¡ç†å‘˜æƒé™**ï¼ŒæŸäº›ç¯å¢ƒä¸å…è®¸

**Antigravity-Proxy å°±æ˜¯æ¥ä¸“æ²»è¿™ä¸ªçš„ã€‚** å®ƒå¯ä»¥ï¼š

- âœ… **ä»…ä»£ç†æŒ‡å®šç¨‹åº**ï¼ˆé»˜è®¤é¢å‘ Antigravity ç›¸å…³è¿›ç¨‹ï¼‰ï¼Œä¸å½±å“å…¶ä»–æµé‡
- âœ… **æ— éœ€ TUN æ¨¡å¼**ï¼Œé¿å…å…¨å±€æ¥ç®¡
- âœ… **é€æ˜ä»£ç†**ï¼Œç›®æ ‡ç¨‹åºå®Œå…¨æ— æ„ŸçŸ¥

### ğŸŒŸ æ ¸å¿ƒä»·å€¼ / Core Value

| ä¼ ç»Ÿæ–¹æ¡ˆ | Antigravity-Proxy |
|---------|-------------------|
| éœ€è¦ TUN æ¨¡å¼ | æ— éœ€ TUN |
| å…¨å±€ä»£ç† | ç²¾å‡†ä»£ç†æŒ‡å®šè¿›ç¨‹ |
| éœ€è¦ç®¡ç†å‘˜æƒé™ | æ™®é€šç”¨æˆ·å³å¯ |
| é…ç½®å¤æ‚ | æ”¾å…¥ DLL å³ç”¨ |

---

## âš¡ Antigravity å¿«é€Ÿå¼€å§‹ / Quick Start

> åªæƒ³è®© Antigravity ç«‹åˆ»èƒ½ç”¨ï¼Ÿçœ‹è¿™ä¸€èŠ‚å°±å¤Ÿäº†ã€‚

### Step 1: å‡†å¤‡ä»£ç† / Prepare a Proxy

å¯åŠ¨ä½ çš„ä»£ç†è½¯ä»¶ï¼ˆä¾‹å¦‚ Clash/Mihomoï¼‰ï¼Œç¡®ä¿æœ¬æœºæœ‰å¯ç”¨çš„ SOCKS5 æˆ– HTTP ä»£ç†ç«¯å£ï¼ˆå¦‚ `127.0.0.1:7890`ï¼‰ã€‚

### Step 2: å‡†å¤‡æ–‡ä»¶ / Get the Files

å‡†å¤‡ä¸¤ä»½æ–‡ä»¶ï¼š
- `version.dll`
- `config.json`

ï¼ˆå¯ä»¥ä» Release ä¸‹è½½ï¼Œæˆ–è‡ªè¡Œç¼–è¯‘ç”Ÿæˆã€‚ï¼‰

### Step 3: éƒ¨ç½²åˆ° Antigravity / Deploy to Antigravity

æŠŠ `version.dll` å’Œ `config.json` å¤åˆ¶åˆ° **Antigravity ä¸»ç¨‹åºç›®å½•**ï¼ˆä¸ `Antigravity.exe` åŒçº§ï¼‰ã€‚ç„¶åå¯åŠ¨ Antigravityï¼Œæå®šã€‚

#### Windows å¸¸è§ç›®å½• + å¿«é€Ÿè·³è½¬

ä¸€èˆ¬æƒ…å†µä¸‹ Antigravity ä¼šè£…åœ¨ï¼š

ä¾‹å¦‚ï¼š`C:\Users\<ç”¨æˆ·å>\AppData\Local\Programs\Antigravity`

å¦‚æœä½ æ‰¾ä¸åˆ°è¿™ä¸ªç›®å½•ï¼šåœ¨æ¡Œé¢/å¼€å§‹èœå•æ‰¾åˆ° Antigravity å›¾æ ‡ï¼Œ**å³é”® â†’ æ‰“å¼€æ–‡ä»¶æ‰€åœ¨çš„ä½ç½®**ï¼Œè·³å‡ºæ¥çš„é‚£ä¸ªç›®å½•å°±æ˜¯å®ƒçš„ä¸»ç¨‹åºç›®å½•ã€‚

æƒ³ä»å‘½ä»¤è¡Œä¸€é”®è·³è¿‡å»ï¼ˆå°‘ç‚¹é¼ æ ‡ï¼Œå¤šç‚¹å¿«ä¹ï¼‰ï¼š

```powershell
cd "$env:LOCALAPPDATA\Programs\Antigravity"
```

```bat
cd /d "%LOCALAPPDATA%\Programs\Antigravity"
```

ï¼ˆå¯é€‰ï¼‰ä½ ä¹Ÿå¯ä»¥è‡ªå·±è®¾ä¸ªç¯å¢ƒå˜é‡ï¼Œä¹‹åå°±èƒ½ `cd` ç§’è¿‡å»ï¼š

```bat
setx ANTIGRAVITY_HOME "%LOCALAPPDATA%\Programs\Antigravity"
```

è®¾ç½®å®Œåï¼šPowerShell ç”¨ `cd $env:ANTIGRAVITY_HOME`ï¼ŒCMD ç”¨ `cd /d %ANTIGRAVITY_HOME%`ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§ / Features

| åŠŸèƒ½ | è¯´æ˜ | Feature | Description |
|------|------|---------|-------------|
| ğŸ”€ **ä»£ç†é‡å®šå‘** | æ‹¦æˆª `connect()` è°ƒç”¨ï¼Œé‡å®šå‘è‡³ä»£ç†æœåŠ¡å™¨ | Proxy Redirect | Intercepts `connect()` and redirects to proxy |
| ğŸŒ **FakeIP ç³»ç»Ÿ** | æ‹¦æˆª DNS è§£æï¼Œåˆ†é…è™šæ‹Ÿ IP å¹¶å»ºç«‹æ˜ å°„ | FakeIP System | Intercepts DNS, allocates virtual IPs |
| ğŸ‘¶ **å­è¿›ç¨‹æ³¨å…¥** | è‡ªåŠ¨å°† DLL æ³¨å…¥åˆ°å­è¿›ç¨‹ | Child Injection | Auto-injects DLL into child processes |
| â±ï¸ **è¶…æ—¶æ§åˆ¶** | é˜²æ­¢ç›®æ ‡ç¨‹åºå› ç½‘ç»œé—®é¢˜å¡æ­» | Timeout Control | Prevents hanging on network issues |
| ğŸ”„ **Fail-Safe** | é…ç½®åŠ è½½å¤±è´¥æ—¶è‡ªåŠ¨ç›´è¿ | Fail-Safe | Falls back to direct connection on error |
| ğŸ¯ **è¿›ç¨‹è¿‡æ»¤** | ä»…ä»£ç†æŒ‡å®šçš„è¿›ç¨‹åˆ—è¡¨ | Process Filter | Proxy only specified processes |
| ğŸ“Š **æµé‡ç›‘æ§** | å¯é€‰çš„æµé‡æ—¥å¿—è®°å½• | Traffic Monitor | Optional traffic logging |

### æ”¯æŒçš„ä»£ç†åè®® / Supported Protocols

- âœ… SOCKS5 (æ¨è / Recommended)
- âœ… HTTP CONNECT

---

## ğŸ”§ å·¥ä½œåŸç† / How It Works

### æ•´ä½“æ¶æ„ / Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ç›®æ ‡ç¨‹åº (Target Process)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  åº”ç”¨ä»£ç      â”‚â”€â”€â”€â–ºâ”‚ Winsock API  â”‚â”€â”€â”€â–ºâ”‚  antigravity-proxy.dll   â”‚   â”‚
â”‚  â”‚  (App Code)  â”‚    â”‚ (ws2_32.dll) â”‚    â”‚  (Hook Layer)            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                       â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â–¼
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚   ä»£ç†æœåŠ¡å™¨      â”‚
                                              â”‚  (SOCKS5/HTTP)   â”‚
                                              â”‚  Proxy Server    â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæµç¨‹ / Core Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. DLL åŠ«æŒ (DLL Hijacking)                                              â”‚
â”‚    ç¨‹åºåŠ è½½ version.dll â†’ åŠ è½½æˆ‘ä»¬çš„ DLL â†’ è½¬å‘çœŸå® version.dll è°ƒç”¨      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. API Hook å®‰è£… (Install Hooks)                                         â”‚
â”‚    ä½¿ç”¨ MinHook æ‹¦æˆª: connect, getaddrinfo, CreateProcessW ç­‰           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. DNS æ‹¦æˆª (DNS Interception)                                           â”‚
â”‚    getaddrinfo("example.com") â†’ åˆ†é… FakeIP (10.0.0.x) â†’ è®°å½•æ˜ å°„       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. è¿æ¥é‡å®šå‘ (Connection Redirect)                                       â”‚
â”‚    connect(10.0.0.x) â†’ æŸ¥è¯¢æ˜ å°„è¿˜åŸåŸŸå â†’ è¿æ¥ä»£ç† â†’ SOCKS5 æ¡æ‰‹         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. å­è¿›ç¨‹ä¼ æ’­ (Child Process Propagation)                                â”‚
â”‚    CreateProcessW â†’ æŒ‚èµ·è¿›ç¨‹ â†’ æ³¨å…¥ DLL â†’ æ¢å¤è¿è¡Œ                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Hook çš„ API åˆ—è¡¨ / Hooked APIs

| API | æ¨¡å— | ç”¨é€” |
|-----|------|------|
| `connect` | ws2_32.dll | æ‹¦æˆª TCP è¿æ¥ |
| `WSAConnect` | ws2_32.dll | æ‹¦æˆª WSA æ–¹å¼è¿æ¥ |
| `getaddrinfo` | ws2_32.dll | æ‹¦æˆª DNS è§£æ (ANSI) |
| `GetAddrInfoW` | ws2_32.dll | æ‹¦æˆª DNS è§£æ (Unicode) |
| `WSAConnectByNameA/W` | ws2_32.dll | æ‹¦æˆªæŒ‰åç§°è¿æ¥ |
| `ConnectEx` | ws2_32.dll | æ‹¦æˆªå¼‚æ­¥è¿æ¥ |
| `CreateProcessW` | kernel32.dll | æ‹¦æˆªè¿›ç¨‹åˆ›å»ºï¼Œæ³¨å…¥å­è¿›ç¨‹ |
| `send/recv` | ws2_32.dll | æµé‡ç›‘æ§ï¼ˆå¯é€‰ï¼‰ |

---

## ğŸ› ï¸ ç¼–è¯‘æ„å»º / Build

### ç¯å¢ƒè¦æ±‚ / Prerequisites

åœ¨å¼€å§‹ç¼–è¯‘ä¹‹å‰ï¼Œè¯·ç¡®ä¿å·²å®‰è£…ä»¥ä¸‹å·¥å…·ï¼š

| ä¾èµ–é¡¹ | ç‰ˆæœ¬è¦æ±‚ | ç”¨é€” | ä¸‹è½½é“¾æ¥ |
|--------|----------|------|----------|
| **Visual Studio 2022** | 2022 æˆ–æ›´é«˜ | C/C++ ç¼–è¯‘å™¨ | [ä¸‹è½½](https://visualstudio.microsoft.com/) |
| **CMake** | >= 3.0 | æ„å»ºç³»ç»Ÿ | [ä¸‹è½½](https://cmake.org/download/) |
| **PowerShell** | 5.0+ | ç¼–è¯‘è„šæœ¬ | Windows è‡ªå¸¦ |

> ğŸ’¡ **æç¤º**: å®‰è£… Visual Studio æ—¶ï¼Œè¯·ç¡®ä¿å‹¾é€‰ **"ä½¿ç”¨ C++ çš„æ¡Œé¢å¼€å‘"** å·¥ä½œè´Ÿè½½ã€‚

### ä¾èµ–é¡¹ / Dependencies

| ä¾èµ– | è¯´æ˜ | è·å–æ–¹å¼ |
|------|------|----------|
| **MinHook** | API Hook æ¡†æ¶ | å·²å†…ç½®äºé¡¹ç›® |
| **nlohmann/json** | JSON è§£æåº“ | ç¼–è¯‘è„šæœ¬è‡ªåŠ¨ä¸‹è½½ |

### ä¸€é”®ç¼–è¯‘ / Quick Build

é¡¹ç›®æä¾›äº† PowerShell ç¼–è¯‘è„šæœ¬ï¼Œæ”¯æŒä¸€é”®ç¼–è¯‘ï¼š

```powershell
# é»˜è®¤ç¼–è¯‘ Release x64
.\build.ps1

# ç¼–è¯‘ Debug ç‰ˆæœ¬
.\build.ps1 -Config Debug

# ç¼–è¯‘ 32 ä½ç‰ˆæœ¬
.\build.ps1 -Arch x86

# æ¸…ç†åé‡æ–°ç¼–è¯‘
.\build.ps1 -Clean

# æŸ¥çœ‹å¸®åŠ©
.\build.ps1 -Help
```

### æ‰‹åŠ¨ç¼–è¯‘ / Manual Build

å¦‚æœä½ æ›´å–œæ¬¢æ‰‹åŠ¨ç¼–è¯‘ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# ========== x64 (64ä½) ==========
mkdir build-x64 && cd build-x64

# é…ç½® (ä½¿ç”¨ Visual Studio 2022)
cmake .. -G "Visual Studio 17 2022" -A x64

# ç¼–è¯‘ Release ç‰ˆæœ¬
cmake --build . --config Release

# è¾“å‡º: version.dll


# ========== x86 (32ä½) ==========
mkdir build-x86 && cd build-x86

# é…ç½®
cmake .. -G "Visual Studio 17 2022" -A Win32

# ç¼–è¯‘
cmake --build . --config Release

# è¾“å‡º: version.dll
```

### å¸¸è§ç¼–è¯‘é”™è¯¯ / Common Build Errors

<details>
<summary><b>âŒ é”™è¯¯: "CMake æœªæ‰¾åˆ°"</b></summary>

**åŸå› **: CMake æœªå®‰è£…æˆ–æœªæ·»åŠ åˆ° PATH

**è§£å†³æ–¹æ¡ˆ**:
1. ä¸‹è½½å¹¶å®‰è£… [CMake](https://cmake.org/download/)
2. å®‰è£…æ—¶å‹¾é€‰ "Add CMake to the system PATH"
3. é‡å¯ç»ˆç«¯åé‡è¯•
</details>

<details>
<summary><b>âŒ é”™è¯¯: "No CMAKE_CXX_COMPILER could be found"</b></summary>

**åŸå› **: Visual Studio æœªå®‰è£…æˆ– C++ å·¥å…·é“¾ç¼ºå¤±

**è§£å†³æ–¹æ¡ˆ**:
1. æ‰“å¼€ Visual Studio Installer
2. ç¡®ä¿å®‰è£…äº† **"ä½¿ç”¨ C++ çš„æ¡Œé¢å¼€å‘"** å·¥ä½œè´Ÿè½½
3. æˆ–è€…ä½¿ç”¨ Developer Command Prompt è¿è¡Œç¼–è¯‘å‘½ä»¤
</details>

<details>
<summary><b>âŒ é”™è¯¯: æ‰¾ä¸åˆ° nlohmann/json.hpp</b></summary>

**åŸå› **: JSON åº“æœªä¸‹è½½

**è§£å†³æ–¹æ¡ˆ**:
ä½¿ç”¨ç¼–è¯‘è„šæœ¬ `build.ps1` ä¼šè‡ªåŠ¨ä¸‹è½½ï¼Œæˆ–æ‰‹åŠ¨ä¸‹è½½ï¼š
```bash
# æ‰‹åŠ¨ä¸‹è½½
curl -o include/nlohmann/json.hpp https://raw.githubusercontent.com/nlohmann/json/develop/single_include/nlohmann/json.hpp
```
</details>

<details>
<summary><b>âŒ é”™è¯¯: LNK2019 unresolved external symbol</b></summary>

**åŸå› **: é“¾æ¥é”™è¯¯ï¼Œé€šå¸¸æ˜¯ Winsock åº“æœªé“¾æ¥

**è§£å†³æ–¹æ¡ˆ**:
ç¡®ä¿ CMakeLists.txt ä¸­åŒ…å«:
```cmake
target_link_libraries(version PRIVATE ws2_32)
```
</details>

---

## ğŸ“ ä½¿ç”¨æ–¹æ³• / Usage

### å¿«é€Ÿå¼€å§‹ / Quick Start

**åªéœ€ 3 æ­¥ï¼Œå³å¯è®©ç›®æ ‡ç¨‹åºèµ°ä»£ç†ï¼**

#### Step 1: å‡†å¤‡æ–‡ä»¶ / Prepare Files

ç¼–è¯‘å®Œæˆåï¼Œä½ ä¼šåœ¨ `output` ç›®å½•å¾—åˆ°ï¼š
- `version.dll` - ä»£ç† DLL
- `config.json` - é…ç½®æ–‡ä»¶

#### Step 2: é…ç½®ä»£ç† / Configure Proxy

ç¼–è¾‘ `config.json`ï¼š

```json
{
    "proxy": {
        "host": "127.0.0.1",
        "port": 7890,
        "type": "socks5"
    },
    "fake_ip": {
        "enabled": true,
        "cidr": "10.0.0.0/8"
    },
    "timeout": {
        "connect": 5000,
        "send": 5000,
        "recv": 5000
    },
    "child_injection": true,
    "target_processes": []
}
```

#### Step 3: éƒ¨ç½² DLL / Deploy DLL

å°† `version.dll` å’Œ `config.json` å¤åˆ¶åˆ°ç›®æ ‡ç¨‹åºçš„**åŒä¸€ç›®å½•**ï¼š

```
ç›®æ ‡ç¨‹åºç›®å½•/
â”œâ”€â”€ ç›®æ ‡ç¨‹åº.exe
â”œâ”€â”€ version.dll      â† æ”¾è¿™é‡Œ
â””â”€â”€ config.json      â† æ”¾è¿™é‡Œ
```

å¯åŠ¨ç›®æ ‡ç¨‹åºï¼Œå®Œæˆï¼ğŸ‰

### é…ç½®æ–‡ä»¶è¯¦è§£ / Configuration Reference

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `proxy.host` | string | `"127.0.0.1"` | ä»£ç†æœåŠ¡å™¨åœ°å€ |
| `proxy.port` | int | `7890` | ä»£ç†æœåŠ¡å™¨ç«¯å£ |
| `proxy.type` | string | `"socks5"` | ä»£ç†ç±»å‹: `socks5` æˆ– `http` |
| `fake_ip.enabled` | bool | `true` | æ˜¯å¦å¯ç”¨ FakeIP ç³»ç»Ÿ |
| `fake_ip.cidr` | string | `"10.0.0.0/8"` | FakeIP åœ°å€èŒƒå›´ |
| `timeout.connect` | int | `5000` | è¿æ¥è¶…æ—¶ (æ¯«ç§’) |
| `timeout.send` | int | `5000` | å‘é€è¶…æ—¶ (æ¯«ç§’) |
| `timeout.recv` | int | `5000` | æ¥æ”¶è¶…æ—¶ (æ¯«ç§’) |
| `child_injection` | bool | `true` | æ˜¯å¦æ³¨å…¥å­è¿›ç¨‹ |
| `traffic_logging` | bool | `false` | æ˜¯å¦è®°å½•æµé‡æ—¥å¿— |
| `target_processes` | array | `[]` | ç›®æ ‡è¿›ç¨‹åˆ—è¡¨ (ç©º=å…¨éƒ¨) |

### éªŒè¯æ˜¯å¦ç”Ÿæ•ˆ / Verification

1. **æ£€æŸ¥æ—¥å¿—**: æŸ¥çœ‹ç›®æ ‡ç¨‹åºç›®å½•ä¸‹æ˜¯å¦ç”Ÿæˆ `proxy.log`
2. **æŸ¥çœ‹ä»£ç†è½¯ä»¶**: è§‚å¯Ÿä»£ç†è½¯ä»¶çš„è¿æ¥æ—¥å¿—
3. **ä½¿ç”¨æŠ“åŒ…å·¥å…·**: ä½¿ç”¨ Wireshark ç¡®è®¤æµé‡èµ°å‘

---

## ğŸš€ è¿›é˜¶ç©æ³• / Advanced Usage

> é™„åŠ ä»·å€¼ï¼šæœ¬é¡¹ç›®é¦–å…ˆä¸º Antigravity æœåŠ¡ï¼Œä½†åº•å±‚æ˜¯é€šç”¨çš„è¿›ç¨‹çº§å¼ºåˆ¶ä»£ç†æ–¹æ¡ˆï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å¼ºåˆ¶ä»£ç†å…¶ä»–ä¸èµ°ç³»ç»Ÿä»£ç†çš„ Windows ç¨‹åºï¼Œæˆ–åŸºäºæ­¤äºŒæ¬¡å¼€å‘ã€‚

### ğŸ¯ å¼ºåˆ¶ä»£ç†å…¶ä»–ç¨‹åº / Force Proxy Other Programs

æƒ³è®© Chromeã€VS Code æˆ–å…¶ä»–ç¨‹åºä¹Ÿèµ°ä»£ç†ï¼Ÿåªéœ€ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼

#### ç¤ºä¾‹ 1: å¼ºåˆ¶ä»£ç† Chrome

```json
{
    "proxy": {
        "host": "127.0.0.1",
        "port": 7890,
        "type": "socks5"
    },
    "child_injection": true,
    "target_processes": []
}
```

ç„¶åå°† `version.dll` å’Œ `config.json` å¤åˆ¶åˆ° Chrome å®‰è£…ç›®å½•ï¼š

```
C:\Program Files\Google\Chrome\Application\
â”œâ”€â”€ chrome.exe
â”œâ”€â”€ version.dll      â† æ”¾è¿™é‡Œ
â””â”€â”€ config.json      â† æ”¾è¿™é‡Œ
```

#### ç¤ºä¾‹ 2: å¼ºåˆ¶ä»£ç† VS Code

```
C:\Users\ä½ çš„ç”¨æˆ·å\AppData\Local\Programs\Microsoft VS Code\
â”œâ”€â”€ Code.exe
â”œâ”€â”€ version.dll      â† æ”¾è¿™é‡Œ
â””â”€â”€ config.json      â† æ”¾è¿™é‡Œ
```

#### ç¤ºä¾‹ 3: ä»…ä»£ç†ç‰¹å®šå­è¿›ç¨‹

å¦‚æœä½ åªæƒ³ä»£ç†ç¨‹åºçš„æŸäº›å­è¿›ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨ `target_processes` é…ç½®ï¼š

```json
{
    "target_processes": [
        "node.exe",
        "npm.cmd",
        "language_server.exe"
    ]
}
```

### ğŸ”§ äºŒæ¬¡å¼€å‘å…¥å£ / Development Entry Points

å¦‚æœä½ æƒ³åŸºäºæ­¤é¡¹ç›®è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œä»¥ä¸‹æ˜¯å…³é”®ä»£ç ä½ç½®ï¼š

| æ¨¡å— | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|
| **é…ç½®åŠ è½½** | `src/core/Config.hpp` | ä¿®æ”¹é…ç½®é¡¹ç»“æ„ |
| **ç½‘ç»œ Hook** | `src/hooks/Hooks.cpp` | æ·»åŠ /ä¿®æ”¹ Hook å‡½æ•° |
| **ä»£ç†åè®®** | `src/network/Socks5.hpp` | SOCKS5 æ¡æ‰‹å®ç° |
| **ä»£ç†åè®®** | `src/network/HttpConnect.hpp` | HTTP CONNECT å®ç° |
| **FakeIP** | `src/network/FakeIP.hpp` | è™šæ‹Ÿ IP åˆ†é…é€»è¾‘ |
| **DLL åŠ«æŒ** | `src/proxy/VersionProxy.cpp` | version.dll ä»£ç†è½¬å‘ |
| **è¿›ç¨‹æ³¨å…¥** | `src/injection/ProcessInjector.hpp` | å­è¿›ç¨‹æ³¨å…¥é€»è¾‘ |

#### å¦‚ä½•æ·»åŠ æ–°çš„ Hookï¼Ÿ

1. åœ¨ `src/hooks/Hooks.cpp` ä¸­å®šä¹‰å‡½æ•°æŒ‡é’ˆç±»å‹å’Œ Detour å‡½æ•°
2. åœ¨ `Hooks::Install()` ä¸­æ·»åŠ  `MH_CreateHookApi()` è°ƒç”¨
3. åœ¨ `Hooks::Uninstall()` ä¸­å¤„ç†æ¸…ç†é€»è¾‘

#### å¦‚ä½•æ”¯æŒæ–°çš„ä»£ç†åè®®ï¼Ÿ

1. åœ¨ `src/network/` ä¸‹åˆ›å»ºæ–°çš„åè®®å®ç° (å‚è€ƒ `Socks5.hpp`)
2. åœ¨ `src/hooks/Hooks.cpp` çš„ `DoProxyHandshake()` ä¸­æ·»åŠ åè®®åˆ†æ”¯

---

## ğŸ“„ è®¸å¯è¯ / License

æœ¬é¡¹ç›®åŸºäº [BSD-2-Clause License](LICENSE.txt) å¼€æºã€‚

MinHook éƒ¨åˆ†ç‰ˆæƒå½’ **Tsuda Kageyu** æ‰€æœ‰ã€‚

---

## ğŸ‘¤ å…³äºä½œè€… / Author

<table>
  <tr>
    <td align="center">
      <b>ç…é¥¼æœå­ï¼ˆ86ï¼‰</b><br/>
      <sub>ç‹¬ç«‹å¼€å‘è€… / Independent Developer</sub>
    </td>
  </tr>
</table>

### ğŸ“± è”ç³»æ–¹å¼ / Contact

| å¹³å° | ä¿¡æ¯ |
|------|------|
| **å¾®ä¿¡** | JavaRookie666 |
| **GitHub** | [@yuaotian](https://github.com/yuaotian) |

### ğŸ æ”¯æŒä½œè€… / Support

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ï¼š
- â­ ç»™é¡¹ç›®ç‚¹ä¸ª Star
- ğŸ”— åˆ†äº«ç»™éœ€è¦çš„æœ‹å‹
- ğŸ’¬ æäº¤ Issue æˆ– PR

<table>
  <tr>
    <td align="center">
      <img src="img/wx_add_qr.png" alt="å¾®ä¿¡äºŒç»´ç " width="200"/><br/>
      <sub>æ·»åŠ å¾®ä¿¡äº¤æµ</sub>
    </td>
    <td align="center">
      <img src="img/wx_gzh_qr.jpg" alt="å…¬ä¼—å·äºŒç»´ç " width="200"/><br/>
      <sub>å…³æ³¨å…¬ä¼—å·</sub>
    </td>
  </tr>
</table>

---

<p align="center">
  <sub>Made with â¤ï¸ by ç…é¥¼æœå­ï¼ˆ86ï¼‰</sub>
</p>
